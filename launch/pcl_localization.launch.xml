<?xml version="1.0"?>
<launch>
  <!-- Static TF publishers -->
  <node pkg="tf2_ros" exec="static_transform_publisher" name="lidar_tf"
        args="0 0 0 0 0 0 1 base_link velodyne"/>

  <node pkg="tf2_ros" exec="static_transform_publisher" name="imu_tf"
        args="0 0 0 0 0 0 1 base_link imu_link"/>

  <!-- PCL Localization Node -->
  <node pkg="pcl_localization_ros2" exec="pcl_localization_node" name="pcl_localization" output="screen">
    <!-- Frame IDs -->
    <param name="global_frame_id" value="map"/>
    <param name="odom_frame_id" value="odom"/>
    <param name="base_frame_id" value="base_link"/>

    <!-- Registration method: NDT, NDT_OMP, GICP, GICP_OMP -->
    <param name="registration_method" value="NDT_OMP"/>

    <!-- NDT parameters -->
    <param name="ndt_resolution" value="1.0"/>
    <param name="ndt_step_size" value="0.1"/>
    <param name="ndt_num_threads" value="0"/>

    <!-- Registration parameters -->
    <param name="score_threshold" value="2.0"/>
    <param name="transform_epsilon" value="0.01"/>

    <!-- Scan parameters -->
    <param name="voxel_leaf_size" value="0.2"/>
    <param name="scan_max_range" value="100.0"/>
    <param name="scan_min_range" value="1.0"/>
    <param name="scan_period" value="0.1"/>

    <!-- Map parameters -->
    <param name="use_pcd_map" value="true"/>
    <param name="map_path" value=""/>

    <!-- Initial pose parameters -->
    <param name="set_initial_pose" value="true"/>
    <param name="initial_pose_x" value="0.0"/>
    <param name="initial_pose_y" value="0.0"/>
    <param name="initial_pose_z" value="0.0"/>
    <param name="initial_pose_qx" value="0.0"/>
    <param name="initial_pose_qy" value="0.0"/>
    <param name="initial_pose_qz" value="0.0"/>
    <param name="initial_pose_qw" value="1.0"/>

    <!-- Sensor fusion parameters -->
    <param name="use_odom" value="false"/>
    <param name="use_imu" value="false"/>

    <!-- Debug -->
    <param name="enable_debug" value="true"/>

    <!-- Topic remapping -->
    <remap from="velodyne_points" to="/velodyne_points"/>
  </node>
</launch>
